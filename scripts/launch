#!/usr/bin/env bash

. /etc/lotus/docker/bash-config


function launch_root_validator {
  tmux new-session -d -s "mir" \; \
    new-window   -t "mir" \; \
    split-window -t "mir:0" -v \; \
    \
    send-keys -t "mir:0" "
        /etc/lotus/docker/subnet-daemon /root" Enter \; \
    send-keys -t "mir:0.0" "
        /etc/lotus/docker/root-single-validator" Enter \; \
    \
    attach-session -t "mir:0"
}

# Start the daemon process
function launch_daemon() {
  echo "Starting spacenet daemon...";

  eudico mir daemon --bootstrap=true;
}

# Launch lotus in the selected mode
function launch() {
  if [ "$INFRA_LOTUS_DAEMON" = true ]; then
    launch_daemon;
  fi
}

launch;
